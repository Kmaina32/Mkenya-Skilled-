
{
  "rules": {
    "courses": {
      ".read": true,
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "bundles": {
      ".read": true,
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "programs": {
      ".read": true,
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "hero": {
      ".read": true,
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "users": {
      ".indexOn": ["portfolio/public"],
      ".read": "query.orderByChild === 'portfolio/public' && query.equalTo === true",
      "$uid": {
        ".read": "data.child('portfolio').child('public').val() === true || (auth != null && (auth.uid === $uid || root.child('users').child(auth.uid).child('isAdmin').val() === true))",
        ".write": "auth != null && ($uid === auth.uid || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
      }
    },
    "calendarEvents": {
      ".read": true,
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "submissions": {
      ".read": "auth != null",
      ".write": "auth != null",
      ".indexOn": ["userId"],
      "$submissionId": {
        ".read": "root.child('submissions').child($submissionId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('isAdmin').val() === true"
      }
    },
    "tutorSettings": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "tutorHistory": {
      "$userId": {
        ".read": "auth != null && (auth.uid === $userId || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
        ".write": "auth != null && auth.uid === $userId"
      }
    },
    "discussions": {
      ".read": "auth != null",
      "threads": {
        "$courseId": {
          ".read": "auth != null",
          ".write": "auth != null",
          ".indexOn": "createdAt"
        }
      },
      "replies": {
        "$threadId": {
          ".read": "auth != null",
          ".write": "auth != null",
          ".indexOn": "createdAt"
        }
      }
    },
    "userNotes": {
      "$userId": {
        "$courseId": {
          ".read": "auth.uid === $userId",
          ".write": "auth.uid === $userId"
        }
      }
    },
    "analytics": {
      ".read": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "apiKeys": {
      "$userId": {
        ".read": "auth != null && auth.uid === $userId",
        ".write": "auth != null && auth.uid === $userId"
      }
    },
    "apiUsage": {
      "$userId": {
        ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
        ".read": "auth != null && auth.uid === $userId"
      }
    },
    "webrtc-offers": {
      "live-session": {
        ".read": "auth != null",
        ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
      }
    },
    "webrtc-answers": {
      "live-session": {
        "$uid": {
          ".read": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
          ".write": "auth != null && auth.uid == $uid"
        }
      }
    },
    "webrtc-candidates": {
      "live-session": {
        "admin": {
          "$studentId": {
            ".read": "auth != null && auth.uid === $studentId",
            ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
          }
        },
        "student": {
          "$uid": {
            ".read": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
            ".write": "auth != null && auth.uid == $uid"
          }
        }
      }
    },
    "liveChat": {
      "$sessionId": {
        ".read": "auth != null",
        ".write": "auth != null"
      }
    },
    "courseFeedback": {
      "$courseId": {
        ".read": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
        ".write": "auth != null"
      }
    },
    "projects": {
      ".read": true,
      "$courseId": {
        ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
      }
    },
    "permissionRequests": {
      ".read": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)",
      "$requestId": {
        "status": {
          ".write": "auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2'"
        }
      }
    },
    "notifications": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.uid === 'YlyqSWedlPfEqI9LlGzjN7zlRtC2' || root.child('users').child(auth.uid).child('isAdmin').val() === true)"
    },
    "organizations": {
      ".indexOn": "ownerId",
      ".read": "auth != null",
      ".write": "auth != null"
    },
    "invitations": {
      ".read": true,
      ".write": "auth != null",
      "$inviteId": {
        ".write": "auth != null && root.child('organizations').child(newData.child('organizationId').val()).child('ownerId').val() === auth.uid"
      }
    }
  }
}
